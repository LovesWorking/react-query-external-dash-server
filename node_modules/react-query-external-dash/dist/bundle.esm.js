import{jsx as e,jsxs as t,Fragment as r}from"react/jsx-runtime";import{useState as o,useEffect as a,useMemo as i}from"react";import n from"socket.io-client";import{useQueryClient as s,QueryClient as l,QueryClientProvider as c}from"@tanstack/react-query";import{deepEqual as d}from"fast-equals";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&o.firstChild?o.insertBefore(a,o.firstChild):o.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}('/*! tailwindcss v3.4.1 | MIT License | https://tailwindcss.com*/*,:after,:before{border:0 solid #e5e7eb;box-sizing:border-box}:after,:before{--tw-content:""}:host,html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4}body{line-height:inherit;margin:0}hr{border-top-width:1px;color:inherit;height:0}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{border-collapse:collapse;border-color:inherit;text-indent:0}button,input,optgroup,select,textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;line-height:inherit;margin:0;padding:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset,legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#9ca3af;opacity:1}input::placeholder,textarea::placeholder{color:#9ca3af;opacity:1}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{height:auto;max-width:100%}[hidden]{display:none}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.relative{position:relative}.z-10{z-index:10}.m-1{margin:.25rem}.m-2{margin:.5rem}.m-3{margin:.75rem}.m-\\[1px\\]{margin:1px}.mx-2{margin-left:.5rem;margin-right:.5rem}.mx-3{margin-left:.75rem;margin-right:.75rem}.my-1{margin-bottom:.25rem;margin-top:.25rem}.my-auto{margin-bottom:auto;margin-top:auto}.-mt-1{margin-top:-.25rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mt-auto{margin-top:auto}.inline-block{display:inline-block}.flex{display:flex}.inline-flex{display:inline-flex}.list-item{display:list-item}.hidden{display:none}.h-3{height:.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-\\[200px\\]{height:200px}.h-\\[22px\\]{height:22px}.h-\\[23px\\]{height:23px}.h-\\[6px\\]{height:6px}.h-full{height:100%}.w-3{width:.75rem}.w-4{width:1rem}.w-\\[18px\\]{width:18px}.w-\\[6px\\]{width:6px}.w-full{width:100%}.min-w-\\[200px\\]{min-width:200px}.min-w-\\[300px\\]{min-width:300px}.flex-grow{flex-grow:1}.rotate-0{--tw-rotate:0deg}.rotate-0,.rotate-90{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate:90deg}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:.25rem}.gap-2{gap:.5rem}.divide-x-2>:not([hidden])~:not([hidden]){--tw-divide-x-reverse:0;border-left-width:calc(2px*(1 - var(--tw-divide-x-reverse)));border-right-width:calc(2px*var(--tw-divide-x-reverse))}.self-stretch{align-self:stretch}.overflow-auto{overflow:auto}.whitespace-nowrap{white-space:nowrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.rounded-sm{border-radius:.125rem}.rounded-bl-\\[4px\\]{border-bottom-left-radius:4px}.rounded-br-\\[4px\\]{border-bottom-right-radius:4px}.rounded-tl-\\[4px\\]{border-top-left-radius:4px}.rounded-tr-\\[4px\\]{border-top-right-radius:4px}.border{border-width:1px}.border-2{border-width:2px}.border-\\[1px\\]{border-width:1px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-b-\\[1px\\]{border-bottom-width:1px}.border-l-2{border-left-width:2px}.border-none{border-style:none}.border-\\[\\#d0d5dd\\]{--tw-border-opacity:1;border-color:rgb(208 213 221/var(--tw-border-opacity))}.border-borderFetching{--tw-border-opacity:1;border-color:rgb(83 177 253/var(--tw-border-opacity))}.border-borderFresh{--tw-border-opacity:1;border-color:rgb(50 213 131/var(--tw-border-opacity))}.border-borderNoObserver{--tw-border-opacity:1;border-color:rgb(52 64 84/var(--tw-border-opacity))}.border-borderPaused{--tw-border-opacity:1;border-color:rgb(155 138 251/var(--tw-border-opacity))}.border-borderStale{--tw-border-opacity:1;border-color:rgb(253 176 34/var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:rgb(209 213 219/var(--tw-border-opacity))}.bg-\\[\\#EAECF0\\]{--tw-bg-opacity:1;background-color:rgb(234 236 240/var(--tw-bg-opacity))}.bg-\\[\\#F2F4F7\\]{--tw-bg-opacity:1;background-color:rgb(242 244 247/var(--tw-bg-opacity))}.bg-\\[\\#d0d5dd\\]{--tw-bg-opacity:1;background-color:rgb(208 213 221/var(--tw-bg-opacity))}.bg-\\[\\#eaecf0\\]{--tw-bg-opacity:1;background-color:rgb(234 236 240/var(--tw-bg-opacity))}.bg-\\[\\#f2f4f7\\]{--tw-bg-opacity:1;background-color:rgb(242 244 247/var(--tw-bg-opacity))}.bg-btnInvalidate{--tw-bg-opacity:1;background-color:rgb(220 104 3/var(--tw-bg-opacity))}.bg-btnRefetch{--tw-bg-opacity:1;background-color:rgb(21 112 239/var(--tw-bg-opacity))}.bg-btnRemove{--tw-bg-opacity:1;background-color:rgb(219 39 119/var(--tw-bg-opacity))}.bg-btnReset{--tw-bg-opacity:1;background-color:rgb(71 84 103/var(--tw-bg-opacity))}.bg-btnTriggerLoadiError{--tw-bg-opacity:1;background-color:rgb(239 68 68/var(--tw-bg-opacity))}.bg-btnTriggerLoading{--tw-bg-opacity:1;background-color:rgb(8 145 178/var(--tw-bg-opacity))}.bg-fetching{--tw-bg-opacity:1;background-color:rgb(178 221 255/var(--tw-bg-opacity))}.bg-fresh{--tw-bg-opacity:1;background-color:rgb(166 244 197/var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgb(229 231 235/var(--tw-bg-opacity))}.bg-green-400{--tw-bg-opacity:1;background-color:rgb(74 222 128/var(--tw-bg-opacity))}.bg-noObserver{--tw-bg-opacity:1;background-color:rgb(234 236 240/var(--tw-bg-opacity))}.bg-paused{--tw-bg-opacity:1;background-color:rgb(217 214 254/var(--tw-bg-opacity))}.bg-queryDetailsbgFetching{--tw-bg-opacity:1;background-color:rgb(209 233 255/var(--tw-bg-opacity))}.bg-queryDetailsbgFresh{--tw-bg-opacity:1;background-color:rgb(209 250 223/var(--tw-bg-opacity))}.bg-queryDetailsbgNoObserver{--tw-bg-opacity:1;background-color:rgb(242 244 247/var(--tw-bg-opacity))}.bg-queryDetailsbgPaused{--tw-bg-opacity:1;background-color:rgb(235 233 254/var(--tw-bg-opacity))}.bg-queryDetailsbgStale{--tw-bg-opacity:1;background-color:rgb(254 240 199/var(--tw-bg-opacity))}.bg-red-400{--tw-bg-opacity:1;background-color:rgb(248 113 113/var(--tw-bg-opacity))}.bg-stale{--tw-bg-opacity:1;background-color:rgb(254 223 137/var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.stroke-current{stroke:currentColor}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-\\[1px\\]{padding:1px}.px-2{padding-left:.5rem;padding-right:.5rem}.py-1{padding-bottom:.25rem;padding-top:.25rem}.py-2{padding-bottom:.5rem;padding-top:.5rem}.py-\\[2px\\]{padding-bottom:2px;padding-top:2px}.pl-3{padding-left:.75rem}.pl-\\[6px\\]{padding-left:6px}.pr-\\[4px\\]{padding-right:4px}.text-left{text-align:left}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-semibold{font-weight:600}.text-\\[\\#1d2939\\]{--tw-text-opacity:1;color:rgb(29 41 57/var(--tw-text-opacity))}.text-\\[\\#344054\\]{--tw-text-opacity:1;color:rgb(52 64 84/var(--tw-text-opacity))}.text-\\[\\#475467\\]{--tw-text-opacity:1;color:rgb(71 84 103/var(--tw-text-opacity))}.text-\\[\\#667085\\]{--tw-text-opacity:1;color:rgb(102 112 133/var(--tw-text-opacity))}.text-\\[\\#6938EF\\]{--tw-text-opacity:1;color:rgb(105 56 239/var(--tw-text-opacity))}.text-\\[\\#909193\\]{--tw-text-opacity:1;color:rgb(144 145 147/var(--tw-text-opacity))}.text-\\[\\#98a2b3\\]{--tw-text-opacity:1;color:rgb(152 162 179/var(--tw-text-opacity))}.text-btnInvalidate{--tw-text-opacity:1;color:rgb(220 104 3/var(--tw-text-opacity))}.text-btnRefetch{--tw-text-opacity:1;color:rgb(21 112 239/var(--tw-text-opacity))}.text-btnRemove{--tw-text-opacity:1;color:rgb(219 39 119/var(--tw-text-opacity))}.text-btnReset{--tw-text-opacity:1;color:rgb(71 84 103/var(--tw-text-opacity))}.text-btnTriggerLoadiError{--tw-text-opacity:1;color:rgb(239 68 68/var(--tw-text-opacity))}.text-btnTriggerLoading{--tw-text-opacity:1;color:rgb(8 145 178/var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128/var(--tw-text-opacity))}.text-inherit{color:inherit}.text-textFetching{--tw-text-opacity:1;color:rgb(23 92 211/var(--tw-text-opacity))}.text-textFresh{--tw-text-opacity:1;color:rgb(2 122 72/var(--tw-text-opacity))}.text-textNoObserver{--tw-text-opacity:1;color:rgb(52 64 84/var(--tw-text-opacity))}.text-textPaused{--tw-text-opacity:1;color:rgb(89 37 220/var(--tw-text-opacity))}.text-textStale{--tw-text-opacity:1;color:rgb(181 71 8/var(--tw-text-opacity))}.opacity-60{opacity:.6}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-inherit{outline-color:inherit}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-\\[\\#D0D5DD\\]:hover{--tw-bg-opacity:1;background-color:rgb(208 213 221/var(--tw-bg-opacity))}.hover\\:bg-\\[\\#EAECF0\\]:hover{--tw-bg-opacity:1;background-color:rgb(234 236 240/var(--tw-bg-opacity))}.hover\\:bg-\\[\\#F0F8FF\\]:hover{--tw-bg-opacity:1;background-color:rgb(240 248 255/var(--tw-bg-opacity))}.hover\\:text-gray-600:hover{--tw-text-opacity:1;color:rgb(75 85 99/var(--tw-text-opacity))}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus-visible\\:ring-2:focus-visible{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus-visible\\:ring-blue-800:focus-visible{--tw-ring-opacity:1;--tw-ring-color:rgb(30 64 175/var(--tw-ring-opacity))}.focus-visible\\:ring-offset-2:focus-visible{--tw-ring-offset-width:2px}@media (prefers-color-scheme:dark){.dark\\:bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81/var(--tw-bg-opacity))}.dark\\:text-\\[\\#6938EF\\]{--tw-text-opacity:1;color:rgb(105 56 239/var(--tw-text-opacity))}.dark\\:hover\\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55/var(--tw-bg-opacity))}}',{insertAt:"top"});let b=[];function g({io:e}){function t({id:t,clientType:r="unkown",username:o="unkown",userType:a="unkown",allQueries:i}){let n=0;b.forEach((e=>{if(e.username.startsWith(o)){const t=(e=>{const t=e.match(/(\d+)$/);return t?parseInt(t[1],10):1})(e.username);t>=n&&(n=t)}})),n>0&&(o=`${o} #${n+1}`),t&&b.push({id:t,clientType:r,username:o,userType:a,allQueries:i}),e.emit("users-update",b)}e.on("connection",(r=>{let{clientType:o,username:a,userType:i,allQueries:n}=r.handshake.query;const s=Array.isArray(a)?a[0]:a,l=Array.isArray(o)?o[0]:o,c=Array.isArray(i)?i[0]:i;let d=n;d=Array.isArray(d)?d:[],t({id:r.id,clientType:l,username:s,userType:c,allQueries:d}),r.on("disconnect",(()=>{return t=r.id,b=b.filter((e=>e.id!==t)),void e.emit("users-update",b);var t})),r.on("message",(t=>{!function(t,r){e.emit("message",`User ${r} sent message: ${t}`)}(t,s)})),r.on("sendToSpecificClient",(({targetClientId:t,message:r})=>{e.to(t).emit("message",r)})),r.on("allQueries",(t=>{Array.isArray(t)||(t=[]);const o=b.find((e=>e.id===r.id));o&&(o.allQueries=t),e.emit("users-update",b)}))}))}let u=null;function p({query:e,socketURL:t}){const[r,i]=o(!!(null==u?void 0:u.connected)),[s,l]=o([]);function c(){null==u||u.connect()}function d(){null==u||u.disconnect()}return u||(u=n(t,{autoConnect:!1,query:e})),a((()=>{function e(){i(!1)}return!u.connected&&c(),u.on("users-update",(e=>{l(e)})),null==u||u.on("connect",(function(){i(!0)})),null==u||u.on("disconnect",e),()=>{u.off("users-update"),u.off("connect"),u.off("disconnect"),e(),d()}}),[]),{socket:u,connect:c,disconnect:d,isConnected:r,users:s}}function w(e){return"fetching"===e.state.fetchStatus?"fetching":e.observersCount?"paused"===e.state.fetchStatus?"paused":e.isQueryStale?"stale":"fresh":"inactive"}const h={fresh:"border-borderFresh",stale:"border-borderStale",fetching:"border-borderFetching",paused:"border-borderPaused",noObserver:"border-borderNoObserver"};function f(e){return h[e]}const x={fresh:"text-textFresh",stale:"text-textStale",fetching:"text-textFetching",paused:"text-textPaused",noObserver:"text-textNoObserver"};function m(e){return x[e]}const y={fresh:"bg-queryDetailsbgFresh",stale:"bg-queryDetailsbgStale",fetching:"bg-queryDetailsbgFetching",paused:"bg-queryDetailsbgPaused",noObserver:"bg-queryDetailsbgNoObserver"};function v({query:t}){return e("div",{className:`text-xs p-2 border  rounded font-medium  \n    ${r=w(t),y[r]}\n    ${m(w(t))}\n    ${f(w(t))}\n    `,children:w(t)});var r}function k({query:r}){if(void 0===r)return null;const o=new Date(r.state.dataUpdatedAt).toLocaleTimeString();return t("div",{className:" min-w-[200px] text-xs",children:[e("h3",{className:"text-left bg-[#EAECF0]  p-1",children:"Query Details"}),t("div",{className:"flex justify-between p-1",children:[e("div",{className:"max-w-1/2 overflow-auto flex flex-wrap items-center",children:`[ "${r.queryKey}" ]`}),e(v,{query:r})]}),t("div",{className:"flex justify-between p-1 ",children:[e("p",{children:" Observers:"}),r.observersCount]}),t("div",{className:"flex justify-between p-1",children:[e("p",{children:" Last Updated:"}),`${o}`]})]})}function C({onClick:r,text:o,textColorClass:a,bgColorClass:i,disabled:n}){return t("button",{disabled:n,onClick:r,className:`${n?"opacity-60 cursor-not-allowed":""} m-1 p-1 ${a} text-xs font-medium py-1 px-2 flex items-center gap-2 rounded bg-[#f2f4f7] border border-[#d0d5dd] cursor-pointer`,children:[e("span",{className:`${i} rounded-full w-[6px] h-[6px]`}),o]})}function N({socket:e,socketID:t,command:r}){e.emit("sendToSpecificClient",{targetClientId:t,message:r})}function F({query:r,socket:o,currentUser:a}){if(void 0===r)return null;const i=r.state.status;function n(e){if(!r)return void console.error("Query not found");const t=a&&a.id;t&&N({socket:o,socketID:t,command:{queryKey:r.queryKey.toString(),command:e}})}return t("div",{className:"min-w-[200px] text-xs flex flex-wrap",children:[e("h3",{className:"text-left bg-[#EAECF0] p-1 w-full",children:"Actions"}),e(C,{disabled:"fetching"===w(r),onClick:()=>{n("Refetch")},bgColorClass:"bg-btnRefetch",text:"Refetch",textColorClass:"text-btnRefetch"}),e(C,{disabled:"pending"===i,onClick:()=>{n("Invalidate")},bgColorClass:"bg-btnInvalidate",text:"Invalidate",textColorClass:"text-btnInvalidate"}),e(C,{disabled:"pending"===i,onClick:()=>{n("Reset")},bgColorClass:"bg-btnReset",text:"Reset",textColorClass:"text-btnReset"}),e(C,{disabled:"fetching"===w(r),onClick:()=>{n("Remove")},bgColorClass:"bg-btnRemove",text:"Remove",textColorClass:"text-btnRemove"}),e(C,{disabled:!1,onClick:()=>{n("Trigger Loading")},bgColorClass:"bg-btnTriggerLoading",text:void 0===r.state.data?"Restore Loading":"Trigger Loading",textColorClass:"text-btnTriggerLoading"}),e(C,{disabled:"pending"===i,onClick:()=>{n("Trigger Error")},bgColorClass:"bg-btnTriggerLoadiError",text:"error"===i?"Restore":"Trigger Error",textColorClass:"text-btnTriggerLoadiError"})]})}function E(){return e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M9 3H15M3 6H21M19 6L18.2987 16.5193C18.1935 18.0975 18.1409 18.8867 17.8 19.485C17.4999 20.0118 17.0472 20.4353 16.5017 20.6997C15.882 21 15.0911 21 13.5093 21H10.4907C8.90891 21 8.11803 21 7.49834 20.6997C6.95276 20.4353 6.50009 20.0118 6.19998 19.485C5.85911 18.8867 5.8065 18.0975 5.70129 16.5193L5 6M10 10.5V15.5M14 10.5V15.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function D(){return e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{className:"copier",d:"M8 8V5.2C8 4.0799 8 3.51984 8.21799 3.09202C8.40973 2.71569 8.71569 2.40973 9.09202 2.21799C9.51984 2 10.0799 2 11.2 2H18.8C19.9201 2 20.4802 2 20.908 2.21799C21.2843 2.40973 21.5903 2.71569 21.782 3.09202C22 3.51984 22 4.0799 22 5.2V12.8C22 13.9201 22 14.4802 21.782 14.908C21.5903 15.2843 21.2843 15.5903 20.908 15.782C20.4802 16 19.9201 16 18.8 16H16M5.2 22H12.8C13.9201 22 14.4802 22 14.908 21.782C15.2843 21.5903 15.5903 21.2843 15.782 20.908C16 20.4802 16 19.9201 16 18.8V11.2C16 10.0799 16 9.51984 15.782 9.09202C15.5903 8.71569 15.2843 8.40973 14.908 8.21799C14.4802 8 13.9201 8 12.8 8H5.2C4.0799 8 3.51984 8 3.09202 8.21799C2.71569 8.40973 2.40973 8.71569 2.21799 9.09202C2 9.51984 2 10.0799 2 11.2V18.8C2 19.9201 2 20.4802 2.21799 20.908C2.40973 21.2843 2.71569 21.5903 3.09202 21.782C3.51984 22 4.07989 22 5.2 22Z",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"})})}function q(t){return e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M7.5 12L10.5 15L16.5 9M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z",stroke:"dark"===t.theme?"#12B76A":"#027A48",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function L(){return e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M9 9L15 15M15 9L9 15M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z",stroke:"#F04438",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function S(){return t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{className:"list",width:"20",height:"20",y:"2",x:"2",rx:"2"}),e("line",{className:"list-item",y1:"7",y2:"7",x1:"6",x2:"18"}),e("line",{className:"list-item",y2:"12",y1:"12",x1:"6",x2:"18"}),e("line",{className:"list-item",y1:"17",y2:"17",x1:"6",x2:"18"})]})}function j(t){return e(r,{children:t.checked?e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M7.5 12L10.5 15L16.5 9M7.8 21H16.2C17.8802 21 18.7202 21 19.362 20.673C19.9265 20.3854 20.3854 19.9265 20.673 19.362C21 18.7202 21 17.8802 21 16.2V7.8C21 6.11984 21 5.27976 20.673 4.63803C20.3854 4.07354 19.9265 3.6146 19.362 3.32698C18.7202 3 17.8802 3 16.2 3H7.8C6.11984 3 5.27976 3 4.63803 3.32698C4.07354 3.6146 3.6146 4.07354 3.32698 4.63803C3 5.27976 3 6.11984 3 7.8V16.2C3 17.8802 3 18.7202 3.32698 19.362C3.6146 19.9265 4.07354 20.3854 4.63803 20.673C5.27976 21 6.11984 21 7.8 21Z",stroke:"dark"===t.theme?"#9B8AFB":"#6938EF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):e("svg",{viewBox:"0 0 24 24",height:"20",width:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M3 7.8c0-1.68 0-2.52.327-3.162a3 3 0 0 1 1.311-1.311C5.28 3 6.12 3 7.8 3h8.4c1.68 0 2.52 0 3.162.327a3 3 0 0 1 1.311 1.311C21 5.28 21 6.12 21 7.8v8.4c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311C18.72 21 17.88 21 16.2 21H7.8c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311C3 18.72 3 17.88 3 16.2V7.8Z",stroke:"dark"===t.theme?"#9B8AFB":"#6938EF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}const A=(e,t,r)=>{if(0===t.length)return r;if(e instanceof Map){const o=new Map(e);if(1===t.length)return o.set(t[0],r),o;const[a,...i]=t;return o.set(a,A(o.get(a),i,r)),o}if(e instanceof Set){const o=A(Array.from(e),t,r);return new Set(o)}if(Array.isArray(e)){const o=[...e];if(1===t.length)return o[t[0]]=r,o;const[a,...i]=t;return o[a]=A(o[a],i,r),o}if(e instanceof Object){const o=Object.assign({},e);if(1===t.length)return o[t[0]]=r,o;const[a,...i]=t;return o[a]=A(o[a],i,r),o}return e};var T=function(e,t,r,o){return new(r||(r=Promise))((function(a,i){function n(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,s)}l((o=o.apply(e,t||[])).next())}))};function Q(e){return Symbol.iterator in e}const U=({expanded:t})=>e("span",{className:"inline-block transform "+(t?"rotate-90":"rotate-0"),children:e("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"stroke-current text-[#98a2b3]",children:e("path",{d:"M6 12L10 8L6 4",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),z=({value:r})=>{const[a,i]=o("NoCopy");return t("button",{className:"bg-transparent text-gray-500 border-none inline-flex p-0 items-center justify-center cursor-pointer w-3 h-3 relative z-10 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-800 focus-visible:ring-offset-2 hover:text-gray-600",title:"Copy object to clipboard","aria-label":"NoCopy"===a?"Copy object to clipboard":"SuccessCopy"===a?"Object copied to clipboard":"Error copying object to clipboard",onClick:"NoCopy"===a?()=>{navigator.clipboard.writeText(JSON.stringify(r)).then((()=>{i("SuccessCopy"),setTimeout((()=>i("NoCopy")),1500)})).catch((e=>{console.error("Failed to copy: ",e),i("ErrorCopy"),setTimeout((()=>i("NoCopy")),1500)}))}:void 0,children:["NoCopy"===a&&e(D,{}),"SuccessCopy"===a&&e(q,{theme:"light"}),"ErrorCopy"===a&&e(L,{})]})},R=({socket:t,dataPath:r,activeQuery:o,currentUser:a})=>{if(!o)return null;return e("button",{className:"bg-transparent text-gray-500 border-none inline-flex p-0 items-center justify-center cursor-pointer w-3 h-3 relative z-10 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-800 focus-visible:ring-offset-2 hover:text-gray-600",title:"Delete item","aria-label":"Delete item",onClick:()=>{if(!o)return null;o.state.data;const e=a&&a.id;e&&N({socket:t,socketID:e,command:{queryKey:o.queryKey.toString(),command:"Data Delete",dataPath:r}})},children:e(E,{})})},M=({socket:t,dataPath:r,activeQuery:o,currentUser:a})=>{if(!o)return null;return e("button",{className:"bg-transparent text-gray-500 border-none inline-flex p-0 items-center justify-center cursor-pointer w-3 h-3 relative z-10 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-800 focus-visible:ring-offset-2 hover:text-gray-600",title:"Remove all items","aria-label":"Remove all items",onClick:()=>{const e=o.state.data,i=A(e,r,[]),n=a&&a.id;n&&N({socket:t,socketID:n,command:{queryKey:o.queryKey.toString(),command:"Data Update",newValue:i}})},children:e(S,{})})},I=({currentUser:t,socket:r,dataPath:o,activeQuery:a,value:i})=>{if(s(),!a)return null;return e("button",{className:"\n    bg-transparent text-[#667085] border-none inline-flex items-center justify-center cursor-pointer \n    w-4 h-4 relative z-10 hover:text-gray-600 focus:outline-none focus-visible:ring-2 \n    focus-visible:ring-blue-800 focus-visible:ring-offset-2\n  ",title:"Toggle value","aria-label":"Toggle value",onClick:()=>{const e=a.state.data,n=A(e,o,!i),s=t&&t.id;s&&N({socket:r,socketID:s,command:{queryKey:a.queryKey.toString(),command:"Data Update",newValue:n}})},children:e(j,{checked:i,theme:"light"})})};function O({currentUser:n,socket:l,editable:c,label:d,value:b,defaultExpanded:g,activeQuery:u,dataPath:p,itemsDeletable:w}){s();const[h,f]=o((g||[]).includes(d)),[x,m]=o([]),y=i((()=>Array.isArray(b)?b.map(((e,t)=>({label:t.toString(),value:e}))):null!==b&&"object"==typeof b&&Q(b)?b instanceof Map?Array.from(b,(([e,t])=>({label:e.toString(),value:t}))):Array.from(b,((e,t)=>({label:t.toString(),value:e}))):"object"==typeof b&&null!==b?Object.entries(b).map((([e,t])=>({label:e,value:t}))):[]),[b]),v=i((()=>Array.isArray(b)?"array":null!==b&&"object"==typeof b&&Q(b)&&"function"==typeof b[Symbol.iterator]?"Iterable":"object"==typeof b&&null!==b?"object":typeof b),[b]),k=i((()=>function(e,t){if(t<1)return[];let r=0;const o=[];for(;r<e.length;)o.push(e.slice(r,r+t)),r+=t;return o}(y,100)),[y]),C=null!=p?p:[],F=function(e,t=!1){const[r,i]=o("");return a((()=>{!function(){T(this,void 0,void 0,(function*(){const{serialize:r}=yield import("superjson"),{json:o}=r(e),a=JSON.stringify(o,null,t?2:void 0);i(a)}))}()}),[e,t]),r}(b);return void 0===u?null:e("div",{className:"min-w-[200px] text-xs flex flex-wrap w-full ",children:t("div",{className:"relative outline-none break-words w-full mr-1",children:[k.length>0&&t(r,{children:[t("div",{className:"flex items-center gap-2",children:[t("button",{className:" cursor-pointer text-inherit font-inherit outline-inherit h-5 bg-transparent border-none p-0 inline-flex items-center gap-1 relative",onClick:()=>f((e=>!e)),children:[e(U,{expanded:h})," ",e("span",{children:d}),t("span",{className:"text-gray-500 text-xs ml-1",children:["iterable"===String(v).toLowerCase()?"(Iterable) ":"",y.length," ",y.length>1?"items":"item"]})]}),c&&t("div",{className:"inline-flex gap-2 items-center",children:[e(z,{value:b}),w&&void 0!==u&&e(R,{currentUser:n,socket:l,activeQuery:u,dataPath:C}),"array"===v&&void 0!==u&&e(M,{currentUser:n,socket:l,activeQuery:u,dataPath:C})]})]}),h&&t(r,{children:[1===k.length&&e(r,{children:e("div",{className:"ml-2 pl-3 border-l-2 border-gray-300",children:y.map(((t,r)=>e(O,{currentUser:n,socket:l,defaultExpanded:g,label:t.label,value:t.value,editable:c,dataPath:[...C,t.label],activeQuery:u,itemsDeletable:"array"===v||"Iterable"===v||"object"===v},t.label+r)))})}),k.length>1&&e("div",{className:"ml-2 pl-3 border-l-2 border-gray-300",children:k.map(((r,o)=>e("div",{children:t("div",{className:"relative outline-none break-words",children:[t("button",{onClick:()=>m((e=>e.includes(o)?e.filter((e=>e!==o)):[...e,o])),className:"cursor-pointer bg-transparent border-none p-0 inline-flex items-center gap-1 relative",children:[e(U,{expanded:x.includes(o)}),"[",100*o,"...",100*o+99,"]"]}),x.includes(o)&&e("div",{className:"ml-2 pl-3 border-l-2 border-gray-300",children:r.map((t=>e(O,{currentUser:n,socket:l,defaultExpanded:g,label:t.label,value:t.value,editable:c,dataPath:[...C,t.label],activeQuery:u},t.label)))})]})},o)))})]})]}),0===k.length&&t("div",{className:"inline-flex gap-2 w-full my-1 leading-11 items-center",children:[t("span",{className:"text-[#344054] flex-grow-1 whitespace-nowrap",children:[d,":"]})," ",!c||void 0===u||"string"!==v&&"number"!==v&&"boolean"!==v?e("span",{className:"flex-grow text-[#6938EF] dark:text-[#6938EF]  ",children:F}):t(r,{children:[c&&u&&("string"===v||"number"===v)&&e("input",{type:"number"===v?"number":"text",className:"border-none h-[22px]   m-[1px] py-[2px] pl-[6px] pr-[4px] flex-grow rounded-sm bg-[#eaecf0] dark:bg-gray-700 hover:bg-[#D0D5DD] dark:hover:bg-gray-800 text-[#6938EF] dark:text-[#6938EF]",value:b.toString(),onChange:e=>{if(!u)return null;const t=u.state.data;let r;r="number"===v?Number(e.target.value):e.target.value;const o=A(t,C,r),a=n&&n.id;a&&N({socket:l,socketID:a,command:{queryKey:u.queryKey.toString(),command:"Data Update",newValue:o}})}}),"boolean"===v&&t("span",{className:"border-none p-1 flex-grow rounded-xs bg-gray-200 dark:bg-gray-700 hover:bg-[#D0D5DD] dark:hover:bg-gray-800 text-[#6938EF] dark:text-[#6938EF] inline-flex gap-2 items-center",children:[e(I,{currentUser:n,socket:l,activeQuery:u,dataPath:C,value:b}),F]})]}),c&&w&&void 0!==u&&e(R,{currentUser:n,socket:l,activeQuery:u,dataPath:C})]})]})})}function K({selectedQuery:r,socket:o,currentUser:a}){return t("div",{className:"flex flex-col w-full ",children:[e(k,{query:r}),e(F,{query:r,socket:o,currentUser:a}),e("h3",{className:"text-left bg-[#EAECF0] p-1 w-full text-xs",children:"Data Explorer"}),e("div",{className:"p-2",children:e(O,{currentUser:a,socket:o,editable:!0,label:"Data",value:null==r?void 0:r.state.data,defaultExpanded:["Data"],activeQuery:r})}),e("h3",{className:"text-left bg-[#EAECF0] p-1 w-full text-xs",children:"Query Explorer"}),e("div",{className:"p-2",children:e(O,{currentUser:a,socket:o,label:"Query",value:r,defaultExpanded:["Query","queryKey"],activeQuery:r})})]})}const P={fresh:"bg-fresh",stale:"bg-stale",fetching:"bg-fetching",paused:"bg-paused",noObserver:"bg-noObserver"};function $({query:r,setSelected:o,selected:a}){return t("button",{onClick:()=>{o(r===a?void 0:r)},className:`\n    flex items-center cursor-pointer\n     text-[#344054] bg-white border-b-[1px] border-[#d0d5dd] hover:bg-[#EAECF0]\n      text-xs\n      ${(null==a?void 0:a.queryKey)==r.queryKey?"bg-[#eaecf0]":""}\n      `,children:[e("div",{className:`p-3  w-[18px] h-[23px] flex items-center justify-center\n      ${i=w(r),P[i]}\n      `,children:r.observersCount}),t("div",{className:"flex justify-between w-full  ",children:[e("span",{className:"py-1 px-2",children:`["${r.queryKey}"]`})," ",!1]})]});var i}function V({allQueries:r,socket:i,currentUser:n}){const[s,l]=o();return a((()=>{const e=r.find((e=>{if(!s)return;return d(e.options.queryKey,null==s?void 0:s.options.queryKey)}));e&&l(e)}),[r,s]),r?t("div",{className:"flex overflow-auto divide-x-2 w-full",children:[e("div",{className:"flex flex-col w-full ",children:r.map(((t,r)=>e($,{selected:s,setSelected:l,query:t},r)))}),s&&e(K,{socket:i,selectedQuery:s,currentUser:n})]}):null}function B({allQueries:t,socket:r,currentUser:o}){return t&&o?e("div",{className:"bg-white min-w-[300px] h-[200px]",children:e(V,{allQueries:t,socket:r,currentUser:o})}):null}function H({children:t}){const[r]=o((()=>new l({defaultOptions:{queries:{staleTime:6e4}}})));return e(c,{client:r,children:t})}function W({query:r,socketURL:i}){const[n,s]=o(""),[l,c]=o(),[d,b]=o([]),[g,u]=o(!0),{users:w,isConnected:h,socket:f}=p({query:r,socketURL:i});return a((()=>{const e=w.find((e=>e.username===n));c(e)}),[c,w,n]),a((()=>{b(w.filter((e=>"server"!==e.clientType)))}),[w]),t(H,{children:[e("div",{children:e("div",{className:"p-[1px] w-full "+(h?"bg-green-400":"bg-red-400")})}),t("div",{className:" w-full h-full py-2 ",children:[t("div",{className:"border-[#d0d5dd] border-b-2 py-1 flex flex-wrap  ",children:[t("div",{className:"mx-2",children:[e("span",{className:"text-[#475467] font-bold ",children:"TANSTACK"}),e("p",{className:"bg-custom-gradient font-semibold text-xs flex ",children:e("span",{className:"gradient-text -mt-1",children:"React Query v5 "})})]}),t("div",{className:"ml-1 my-auto flex flex-wrap",children:[t("div",{className:"flex items-center justify-center",children:[e("button",{onClick:()=>{u(!0)},className:(!0===g?"bg-[#F2F4F7] text-[#344054] hover:bg-[#F0F8FF]":" bg-[#EAECF0] text-[#909193]")+"    p-1  border-[1px] border-[#d0d5dd] rounded-bl-[4px] rounded-tl-[4px] text-xs  px-2",children:"Queries"}),e("button",{onClick:()=>{u(!1)},className:(!1===g?"bg-[#F2F4F7] text-[#344054] hover:bg-[#F0F8FF]":"bg-[#EAECF0] text-[#909193]")+"    p-1  border-[1px] border-[#d0d5dd] rounded-br-[4px] rounded-tr-[4px] text-xs px-2",children:"Mutations"})]}),t("div",{className:" flex flex-wrap",children:[e("div",{className:"flex",children:t("select",{value:n,disabled:!d.length,className:"p-1 m-1 border-2 border-[#d0d5dd]   shadow-lg rounded-md mx-3",onChange:e=>{s(e.target.value.trim())},children:[d.length?e("option",{hidden:!0,value:"",children:"Select a user"},"default"):e("option",{hidden:!0,value:"",children:"No connected users"},"default"),d.map(((t,r)=>e("option",{value:t.username.toString(),children:t.username},r+t.username)))]})}),e("p",{className:`ml-auto  ${l?"bg-green-400":"bg-red-400"} p-1 m-2 rounded-md text-sm  mt-auto`,children:l?"CONNECTED":"DISCONNECTED"})]})]})]}),g?e(B,{allQueries:null==l?void 0:l.allQueries,socket:f,currentUser:l}):e("h1",{className:"m-3",children:"Comming soon..."})]})]})}export{W as ExternalDevTools,g as socketHandle};
